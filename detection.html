<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>동영상 업로드 및 분석 프로토타입</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles_detection.css"> <!-- 분석 페이지용 스타일 시트 -->
</head>
<body>
    <header class="header">
        <img onclick='movePage_Home()' src='img/logo.png' href="index.html" class="logo">
        <nav class="nav-items">
            <a href="index.html">홈</a>
            <a href="detection.html">분석</a>
            <a href="company.html">회사</a>
            <a href="#">정책</a>
        </nav>
    </header>

    <h1>동영상 업로드 및 분석</h1>

    <!-- 파일 업로드 버튼 -->
    <label class="input-file-button" for="videoInput">
        업로드
    </label>
    <input type="file" accept="video/*" id="videoInput" style="display: none;" onchange="playAndAnalyze()">
    <button onclick="redirectToDetection()">분석하기</button>

    <video controls id="videoPlayer" onended="analyzeVideo()">
        현재 브라우저는 비디오 태그를 지원하지 않습니다.
    </video>

    <!-- 분석하기 버튼 -->
    

    <script>
        function playAndAnalyze() {
            const videoInput = document.getElementById('videoInput');
            const videoPlayer = document.getElementById('videoPlayer');

            const file = videoInput.files[0];

            if (file) {
                const objectURL = URL.createObjectURL(file);
                videoPlayer.src = objectURL;
                videoPlayer.play();
            }
        }
        
        function movePage_Home() {
            window.location.href = 'index.html';
        }

        function analyzeVideo() {
            // 비디오 재생이 끝나면 분석 페이지로 이동하는 코드 추가
            alert('비디오 재생이 완료되었습니다. 분석 페이지로 이동합니다.');
            // redirectToDetection();
        }

        function redirectToDetection() {
            window.location.href = 'detection_play.html'; // 분석 페이지 주소로 변경
        }
    </script>
</body>
</html>
